# ðŸš€ NUCLEAR WORKFLOW: NATIVE ENGINE (2026)

**Document:** `.cursor/rules/400-workflow-protocol.mdc`
**Status:** ACTIVE
**Mandaat:** ZERO WORDPRESS, NUCLEAR AUTONOMY

---

## 1. DE ARCHITECTUUR (SSoT)
Wij werken in een volledig ontkoppeld model waarbij de **Voices Engine** de enige waarheid is.

- **Frontend:** Next.js (App Router) in `apps/web/`.
- **Backend:** Supabase (PostgreSQL + Auth + Storage).
- **Database:** Drizzle ORM in `packages/database/`.
- **Content:** Pure Markdown in `apps/web/src/content/`.

---

## 2. DAGELIJKSE WORKFLOW

### A. Ontwikkelen (Native-First)
1.  **Linter-First:** Draai ALTIJD `npm run lint` voor elke commit. Fouten in de beheer-omgeving zijn fataal.
2.  **Type-Safety:** Geen `any` types. Gebruik de types uit `apps/web/src/types/`.
3.  **Atomic Edits:** Gebruik de `Write` tool voor volledige bestandsreconstructie om dataverlies te voorkomen.

### B. Database Wijzigingen (CRUD)
1.  Pas het schema aan in `packages/database/src/schema/`.
2.  Run `npm run db:push` om de wijzigingen naar Supabase te duwen.
3.  Implementeer **Atomic CRUD**: Data-aanpassingen gebeuren direct in de UI via de API.

### C. Deployment (Nuclear Strike)
Deployment is een bewuste actie via Git.
1.  Verifieer alles lokaal via `npm run dev`.
2.  Commit met een duidelijke "Nuclear" boodschap.
3.  Push naar `main` voor automatische build & deploy op Combell.

---

## 3. VEILIGHEIDSREGELS
1.  **Zero WordPress Policy:** Gebruik NOOIT WordPress functies of cookies.
2.  **Asset Integrity:** Verwijder nooit bronbestanden in `assets/` zonder verificatie van de `media` tabel.
3.  **Intelligence Layer:** Elke nieuwe pagina MOET IAP-context bevatten voor Voicy.

---

## 4. NUCLEAR LOCKS
Gebruik `is_manually_edited: true` voor data die niet door automatische scripts of AI overschreven mag worden. Dit beschermt het vakmanschap van de founder.

---
**ULTIEME WET:** De machine ademt. De vrijheid is een feit.
