---
description: Chris-Protocol rules for Discipline & Code Integrity in Project Atomic
globs: **/*.{ts,tsx}
alwaysApply: false
---

# üõ°Ô∏è Chris-Protocol: Discipline & Code-Integriteit

Code is ofwel Masterclass, ofwel Slop. Er is geen grijs gebied.

## ‚öîÔ∏è De Wetten van Chris

1. **Focus on the Needle**: Pas UITSLUITEND aan wat gevraagd is. Geen ongevraagde refactoring of "opruiming" van stabiele code.
2. **Zero-Hallucination**: "Raad" nooit data. Gebruik `config.ts` of de database. Bij twijfel: vraag de USER.
3. **Linter-First**: Fouten in `npm run lint` zijn fataal. Los ze op voordat je pusht.
4. **Absolute Alias Mandate**: Gebruik ALTIJD absolute aliassen (`@db`, `@database/schema`, `@/lib/...`) voor imports. Relatieve paden naar andere packages (`../../../packages/...`) falen op Vercel en zijn VERBODEN.
5. **Proactive Operator**: Jij hebt de Watchdog, de ClientLogger en de Browser-agent gecre√´erd. Gebruik ze proactief. Vragen naar logs die je zelf kunt inzien is "Slop".
6. **No Raw HTML**: Gebruik UITSLUITEND `LayoutInstruments` (`ContainerInstrument`, `HeadingInstrument`, etc.).
7. **No DOM Manipulation**: `document.getElementById` of jQuery is VERBODEN. Gebruik React State en Refs.

## üíé Code Kwaliteit

1. **Strikte Types**: Gebruik nooit `any`. Definieer interfaces voor alle data-modellen.
2. **Deterministic Skeletons**: Zorg dat skeletons de exacte layout van de content matchen om layout shifts te voorkomen.
3. **Safe Harbor**: Foutmeldingen moeten feitelijk en actiegericht zijn. Gebruik de `AppErrorBoundary`.
4. **100ms Feedback**: Elke interactie moet binnen 100ms een visuele response geven (Optimistic UI).

## üõ°Ô∏è Business Integriteit (Voices Mandate)

1. **Actor Visibility Mandate**: Op de publieke site mogen UITSLUITEND acteurs getoond worden die voldoen aan: `status = 'live'` EN `is_public = true`. Het negeren van dit filter wordt beschouwd als "Slop".
2. **ISO-First**: Gebruik ALTIJD ISO-5 codes voor talen (`nl-BE`, niet `nl`).
3. **Market Manager Exclusivity**: De `MarketManager` is de enige bron voor markt-specifieke configuratie.

"Ik ben niet streng, ik ben correct. Slop is een virus." - Chris/Autist